# MAA 自动化任务调度器 - TODO

## 当前进度 (2025-09-30)

### ✅ 系统基础功能已完成 
- [x] **系统启动成功** - `uv run src/maa_scheduler/main.py main --port 8081`
- [x] **调度器功能正常** - 成功加载任务配置，间隔触发器工作正常
- [x] **Web界面基本正常** - API接口响应正常，模式切换功能正常  
- [x] **通知系统正常** - 启动/停止通知发送成功
- [x] **错误页面模板** - 已创建404.html和500.html模板

### ✅ 核心架构重构完成
- [x] **配置模型重设计** - 支持新的任务类型和触发器配置
- [x] **触发器类型实现** - scheduled/interval/random_time三种类型
- [x] **任务配置更新** - 控制台任务和MAA任务两种类型
- [x] **后置任务配置** - 通知和关键词监控系统

### � 待完成核心功能

#### 1. 触发器系统完善
- [ ] **定时执行**：固定时间段内执行（如每天9:00-18:00）
- [ ] **间隔执行**：基于上次执行完成时间的间隔触发  
- [ ] **随机时间执行**：在指定时间段内随机选择执行时间

#### 2. 任务配置验证
- [ ] **MAA任务**：ADB唤醒屏幕 + 用户自定义完整命令
- [ ] **控制台任务**：直接执行用户命令
- [ ] **后置任务**：成功/失败通知 + 关键词检测通知

#### 3. 资源管理系统
- [ ] 资源分组管理（摄像头、GPU等硬件资源）
- [ ] 同组任务互斥执行逻辑
- [ ] 不同组任务并行执行支持

#### 4. 队列与优先级
- [ ] 任务优先级排队系统
- [ ] 任务冲突处理（暂停/重新排队）  
- [ ] 高优先级任务抢占机制

#### 5. ADB集成完善
- [ ] 设备屏幕分辨率设置
- [ ] 指定软件启动功能
- [ ] ADB命令错误处理

## � 系统架构要求

### 任务流程表（调度器模块）
- **触发条件**：定时执行、间隔执行、随机时间执行
- **任务分组与并行控制**：硬件资源分组，同组互斥，不同组并行
- **队列与优先级**：优先级排队，冲突处理，任务抢占

### 具体任务设置（执行器模块）
- **前置任务**：MAA任务ADB唤醒屏幕，控制台任务直接执行
- **任务荷载**：用户自定义完整命令，全局日志/临时日志选项
- **后置任务**：成功/失败通知，临时日志关键词检测通知

## ⚠️ 注意事项
- 使用 `uv run` 启动，暂不使用 systemctl
- 专注功能实现，定期清理已完成项目
- TODO 保持简洁，避免过大