# TODO List for MAA Auto Scheduler

## 已完成功能 ✅
- [x] 项目结构初始化
- [x] Webhook 推送配置
- [x] 核心调度器模块
- [x] 任务执行器模块  
- [x] Web 控制界面基础框架
- [x] systemctl 服务配置
- [x] 配置管理系统
- [x] 通知系统
- [x] 基础日志系统

## 核心功能实现状态 ✅

### 1. 核心调度器模块 (scheduler) - 已完成
- [x] 任务队列管理
- [x] 定时触发器 (cron 式定时)
- [x] 间隔触发器 (基于上次执行时间)
- [x] 随机时间触发器
- [x] 任务优先级管理
- [x] 资源分组与并发控制
- [x] 任务状态管理
- [x] 调度模式切换 (自动调度/单任务模式)

### 2. 任务执行器模块 (executor) - 已完成
- [x] 前置任务处理
  - [x] ADB 设备控制
  - [x] 分辨率设置
  - [x] 应用启动
  - [x] 自定义前置命令
- [x] 任务荷载执行
- [x] 后置任务处理
- [x] 日志管理 (全局日志/临时日志)
- [x] 推送通知集成
- [x] 关键词监控
- [x] 任务取消和清理

### 3. Web 控制界面 (web_ui) - 基础完成
- [x] 任务列表管理页面
- [x] 实时监控仪表板
- [x] 任务创建和配置
- [x] 系统状态监控
- [x] 模式切换 (调度模式/单任务模式)
- [x] RESTful API 接口
- [ ] 日志查看页面 (前端实现)
- [ ] 任务编辑功能
- [ ] 高级配置页面

### 4. 配置管理 (config) - 已完成
- [x] 任务配置文件管理 (YAML)
- [x] 资源分组配置
- [x] 触发条件配置
- [x] 推送配置管理
- [x] 环境变量集成
- [x] 配置验证和类型检查

### 5. 系统集成 (system) - 已完成
- [x] systemctl 服务文件
- [x] 开机自启动脚本
- [x] 开发环境脚本
- [x] 服务安装脚本
- [x] 信号处理和优雅关闭

### 6. 通知系统 (notification) - 已完成
- [x] Webhook 推送实现
- [x] 任务状态通知
- [x] 日志关键词监控
- [x] 自定义推送模板
- [x] 系统状态通知

### 7. 日志系统 (logging) - 基础完成
- [x] 全局日志记录
- [x] 任务临时日志
- [x] 日志轮转配置
- [x] 结构化日志格式
- [ ] Web 日志查看界面
- [ ] 日志搜索与过滤功能

## 待完善功能 📋

### 1. Web 界面增强
- [ ] 完整的日志查看页面
- [ ] 任务编辑功能
- [ ] 配置导入导出
- [ ] 性能监控图表
- [ ] 移动端适配

### 2. 高级功能
- [ ] 任务依赖关系
- [ ] 条件触发器
- [ ] 多用户支持
- [ ] 权限管理
- [ ] 审计日志

### 3. 监控和告警
- [ ] 系统资源监控
- [ ] 任务性能统计
- [ ] 告警规则配置
- [ ] 监控面板

### 4. 扩展功能
- [ ] 插件系统
- [ ] 自定义触发器
- [ ] 多种通知渠道
- [ ] 分布式部署支持

### 8. 测试与文档
- [ ] 单元测试
- [ ] 集成测试
- [ ] 用户文档
- [ ] API 文档

## 技术架构设计
- 后端: FastAPI + APScheduler
- 前端: HTML/CSS/JS (简洁的管理界面)
- 数据存储: YAML 配置文件 + SQLite (任务历史)
- 进程管理: asyncio + psutil
- 通知: Webhook 推送
- 系统集成: systemctl service

## 开发优先级
1. 核心调度器 - 高优先级
2. 任务执行器 - 高优先级  
3. Web 界面 - 中优先级
4. 系统集成 - 中优先级
5. 测试与文档 - 低优先级